/* -*- Mode: js; js-indent-level: 2; indent-tabs-mode: nil; tab-width: 2 -*- */
/* vim: set shiftwidth=2 tabstop=2 autoindent cindent expandtab: */
/*
 * Copyright 2013 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

//var create = Object.create;
//var defineProperty = Object.defineProperty;
//var keys = Object.keys;
//var isArray = Array.isArray;
//var fromCharCode = String.fromCharCode;
//var logE = Math.log;
//var max = Math.max;
//var min = Math.min;
//var pow = Math.pow;
//var push = Array.prototype.push;
//var slice = Array.prototype.slice;
//var splice = Array.prototype.splice;
//
//function fail(msg, context) {
//  throw new Error((context ? context + ': ' : '') + msg);
//}
//function assert(cond, msg, context) {
//  if (!cond)
//    fail(msg, context);
//}
//
//function rgbaObjToStr(color) {
//  return 'rgba(' + color.red + ',' + color.green + ',' + color.blue + ',' +
//         color.alpha / 255 + ')';
//}
//function rgbIntAlphaToStr(color, alpha) {
//  color |= 0;
//  if (alpha >= 1) {
//    var colorStr = color.toString(16);
//    while (colorStr.length < 6) {
//      colorStr = '0' + colorStr;
//    }
//    return "#" + colorStr;
//  }
//  var red = color >> 16 & 0xFF;
//  var green = color >> 8 & 0xFF;
//  var blue = color & 0xFF;
//  return 'rgba(' + red + ',' + green + ',' + blue + ',' + alpha + ')';
//}
//function argbUintToStr(argb) {
//  return 'rgba(' + (argb >>> 16 & 0xff) + ',' + (argb >>> 8 & 0xff) + ',' +
//         (argb & 0xff) + ',' + (argb >>> 24 & 0xff) / 0xff + ')';
//}
//
//// Some browser feature testing
//(function functionNameSupport() {
//  /*jshint -W061 */
//  if (eval("function t() {} t.name === 't'")) {
//    return; // function name feature is supported
//  }
//  Object.defineProperty(Function.prototype, 'name', {
//    get: function () {
//      if (this.__name) {
//        return this.__name;
//      }
//      var m = /function\s([^\(]+)/.exec(this.toString());
//      var name = m && m[1] !== 'anonymous' ? m[1] : null;
//      this.__name = name;
//      return name;
//    },
//    configurable: true,
//    enumerable: false
//  });
//})();
//
//var randomStyleCache;
//function randomStyle() {
//  if (!randomStyleCache) {
//    randomStyleCache = [];
//    for (var i = 0; i < 50; i++) {
//      randomStyleCache.push('#' + ('00000' + (Math.random() * (1 << 24) | 0).toString(16)).slice(-6));
//    }
//  }
//  return randomStyleCache[(Math.random() * randomStyleCache.length) | 0];
//}

